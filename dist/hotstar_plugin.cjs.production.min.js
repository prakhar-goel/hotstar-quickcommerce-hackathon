"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(exports,"__esModule",{value:!0}),require("platform"),function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".hotstar_ad_component_wrapper{align-items:end;box-sizing:border-box;display:flex;flex-direction:row;height:100%;left:0;padding-bottom:7.5rem;padding-left:2rem;padding-right:2rem;position:absolute;top:0;width:100%;z-index:100}.hotstar_ad_component_wrapper .or_text{color:#fff;font-size:1rem;font-weight:500;margin-bottom:4.2rem;margin-left:auto;margin-right:auto}.hotstar_ad_component_wrapper .shop-button{align-items:center;background-color:transparent;color:#fff;display:flex;font-weight:500;gap:4px;margin-bottom:4.2rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.hotstar_ad_component_wrapper .shop-button span{font-family:inherit;font-size:inherit;font-weight:500}.hotstar_ad_component_wrapper .ad_item_card{align-items:center;background-color:#00000079;border-radius:8px;cursor:pointer;display:flex;flex-direction:row;height:10rem;margin-left:1rem;padding:10px;width:22rem}.hotstar_ad_component_wrapper .ad_item_card img{border-radius:8px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;-o-object-fit:cover;object-fit:cover;width:30%}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content{padding:0 10px;width:70%}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .title{color:#fff;font-size:1rem;font-weight:500}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .description{color:#ffffffb3;font-size:.8rem;font-weight:regular;margin-top:2px}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .price{color:#fff;font-size:1rem;font-weight:500;margin-top:1rem}.hotstar_ad_component_wrapper .qr_container{background-color:#00000079;border-radius:8px;display:flex;flex-direction:column;height:20rem;padding:1rem;width:18rem}.hotstar_ad_component_wrapper .qr_container img{border-radius:8px;height:auto;-o-object-fit:contain;object-fit:contain;width:100%}.hotstar_ad_component_wrapper .qr_container p{color:#fff;font-size:1rem;font-weight:500;margin-top:1rem;text-align:center}@media only screen and (max-width:650px){.hotstar_ad_component_wrapper{bottom:20%}@media(orientation:landscape){.maxtap_main>p{font-size:calc(1vw + .2rem)}}@media (orientation:portrait){.maxtap_main>p{font-size:calc(1vw + .3rem)}}}");var t=function(){for(var e=document.querySelectorAll("video"),t=0;t<e.length;t++)if("VIDEO"===e[t].tagName)return e[t]},n=function(){var e=document.querySelector("[data-displaymaxtap]"),t=document.querySelector(".maxtap_img_wrapper");if(document.querySelector(".maxtap_img_wrapper")&&window.innerWidth>740&&e&&t){var n=.05*e.getBoundingClientRect().width;t.style.width=n>50?n+"px":"50px"}},o=new(function(){function o(){var o=this;this.currentComponentIndex=-1,this.isInitialized=!1,this.init=function(e){var r;if(o.isInitialized||document.getElementById("hotstar_ad_plugin"))console.log("Re-Initializing");else if(e.contentId)try{if(o.isInitialized=!0,o.contentId=e.contentId,"undefined"==typeof window)throw new ReferenceError("'window.document' is undefined while initializing Ads. Initialize in lifecyle events");o.video=t(),(r=o.contentId,new Promise((function(e,t){try{fetch("https://raw.githubusercontent.com/prakhar-goel/hotstar-quickcommerce-hackathon/main/assets/data.json",{method:"GET"}).then((function(n){n.json().then((function(n){n[r]?e(n[r].adsData):t("No data found")}))})).catch((function(e){t(e)}))}catch(e){t(e)}}))).then((function(e){o.componentsData=e,o.componentsData?(o.addAdElement(),window.addEventListener("resize",(function(){n()})),o.intervalId=setInterval(o.updateComponent,1e3)):console.error("Ad data is empty!")})).catch((function(e){console.error(e)}))}catch(e){console.error(e),o.isInitialized=!1}else console.error("ContentId is missing")},this.updateComponent=function(){if(o.video){if(!o.adDivComponent)return o.addAdElement(),void console.error("Ad element is not present",{method:"updateComponent"});if(o.componentsData)if(o.video.parentElement===o.adDivComponent.parentElement||(console.error("Ad element is not sibling to video element",{method:"updateComponent"}),o.adDivComponent.remove(),o.addAdElement())){var e=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(t>=o.startTime&&t<=o.endTime)return n}return-1}(o.componentsData,Math.floor(o.video.currentTime));console.log("newAdComponentIndex",e),e<0?o.removeCurrentAdElement(o.adDivComponent):(o.currentComponentIndex=e,o.canCloseAd(Math.floor(o.video.currentTime))&&"none"!==o.adDivComponent.style.display&&(console.log("Removing ad",{methodName:"updateComponent"}),o.removeCurrentAdElement(o.adDivComponent)),o.canAdDisplay(Math.floor(o.video.currentTime))&&o.adDivComponent&&"none"===o.adDivComponent.style.display&&(console.log("Displaying ad",{methodName:"updateComponent"}),o.displayAd()))}else console.error("Ad element is not present",{method:"updateComponent"});else console.error("Ad data is empty!",{method:"updateComponent"})}else o.video=t()},this.addAdElement=function(){var e;return!!o.video&&(o.video.style.width="100%",o.video.style.height="100%",o.parentElement=o.video.parentElement,!!o.parentElement&&(o.parentElement.style.position="relative",o.adDivComponent=document.createElement("div"),o.adDivComponent.style.display="none",o.adDivComponent.id="hotstar_ad_plugin",o.adDivComponent.className="hotstar_ad_component_wrapper",null==(e=o.parentElement)||e.appendChild(o.adDivComponent),o.adDivComponent.addEventListener("click",o.redirectToAd),n(),!0))},this.canAdDisplay=function(e){var t=o.componentsData[o.currentComponentIndex];return!(t.startTime<0||!o.componentsData||!t)&&e<o.componentsData[o.currentComponentIndex].endTime&&e>o.componentsData[o.currentComponentIndex].startTime},this.canCloseAd=function(e){return!o.componentsData||!(o.componentsData[o.currentComponentIndex].startTime<0)&&(e>o.componentsData[o.currentComponentIndex].endTime||e<o.componentsData[o.currentComponentIndex].startTime)},this.removeCurrentAdElement=function(e){e&&(e.style.display="none",e.innerHTML="")},this.displayAd=function(){if(o.adDivComponent&&o.componentsData){if("flex"!==o.adDivComponent.style.display&&!(o.currentComponentIndex<0)&&o.componentsData[o.currentComponentIndex]){var t=o.componentsData[o.currentComponentIndex];t.items.length>3&&(t.items=t.items.slice(0,3));var n=document.createElement("button");n.className="shop-button",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-bag"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg><span>Shop</span>',o.adDivComponent.appendChild(n);for(var r,i=function(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,void 0):void 0}}(t))){o&&(t=o);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.items);!(r=i()).done;){var a=r.value,d=a.description.length>70?a.description.slice(0,70)+"...":a.description,m=document.createElement("a");m.className="ad_item_card",m.href=a.redirectUrl,m.target="_blank",m.innerHTML='\n      <img src="'+a.imageUrl+'" alt="'+a.title+'"/>\n      <div class="ad_item_card_content">\n        <h3 class="title">'+a.title+'</h3>\n        <p class="description">'+d+'</p>\n        <p class="price">'+a.price+"</p>\n      </div>\n      ",o.adDivComponent.appendChild(m)}if(t.items.length>0){var p=document.createElement("p");p.className="or_text",p.innerHTML="OR",o.adDivComponent.appendChild(p)}if(t.qrData){var c=document.createElement("div");c.className="qr_container",c.innerHTML='\n      <img src="'+t.qrData.qrImageUrl+'" alt="'+t.qrData.title+'"/>\n      <p>'+t.qrData.title+"</p>\n      ",o.adDivComponent.appendChild(c)}o.adDivComponent.style.display="flex"}}else console.error("Ad element is not present",{method:"displayAd",adDivComponent:o.adDivComponent,componentsData:o.componentsData})},this.redirectToAd=function(){try{if(!o.componentsData)return;o.video.pause()}catch(e){console.error(e)}},this.parentElement=void 0,this.intervalId=void 0}return o.prototype.removeAd=function(){var e;clearInterval(this.intervalId),this.isInitialized=!1,this.adDivComponent=void 0,this.currentComponentIndex=0,this.removeCurrentAdElement(document.getElementById("hotstar_ad_plugin")),null==(e=document.getElementById("hotstar_ad_plugin"))||e.remove()},o}());console.log("ads_plugin@0.1.18"),exports.AdComponent=o;
//# sourceMappingURL=hotstar_plugin.cjs.production.min.js.map
