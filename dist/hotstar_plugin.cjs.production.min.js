"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("platform"),function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".hotstar_ad_component_wrapper{align-items:end;box-sizing:border-box;display:flex;flex-direction:row;font-family:inherit;height:100%;left:0;padding-bottom:7.5rem;padding-left:7rem;padding-right:7rem;position:absolute;top:0;width:100%;z-index:100}.hotstar_ad_component_wrapper .or_text{color:#fff;font-size:1rem;font-weight:500;height:10rem;margin-left:auto;margin-right:auto}.hotstar_ad_component_wrapper .shop-button{align-items:center;background-color:#000000ad;border:2px solid transparent;border-radius:8px;color:#fff;display:flex;flex-direction:column;font-weight:500;gap:4px;height:6rem;justify-content:center;padding:10px;transition:all .3s ease;width:6rem}.hotstar_ad_component_wrapper .shop-button:hover{border:2px solid #fff}.hotstar_ad_component_wrapper .shop-button span{font-family:inherit;font-size:.6rem;font-weight:500}.hotstar_ad_component_wrapper .shop-button svg{height:.6rem;width:.6rem}.hotstar_ad_component_wrapper .ad_item_card{align-items:normal;background-color:#000000ad;border:2px solid transparent;border-radius:8px;cursor:pointer;display:flex;flex-direction:row;font-family:inherit;height:6rem;margin-left:1rem;padding:10px;transition:all .3s ease;width:21vw}.hotstar_ad_component_wrapper .ad_item_card:hover{border:2px solid #fff}.hotstar_ad_component_wrapper .ad_item_card img{border-radius:8px;height:auto;-o-object-fit:cover;object-fit:cover;width:30%}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content{display:flex;flex-direction:column;font-family:inherit;padding:0 10px;width:70%}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .footer{align-items:flex-end;display:flex;flex-direction:row;justify-content:space-between;margin-top:auto}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .footer .delivery_time{align-items:center;color:#fff;display:flex;flex-direction:row;font-family:inherit;font-size:.6rem;gap:4px;margin-top:.4rem}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .footer .delivery_time p{font-size:.6rem;font-weight:500}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .delivery_time svg{height:.6rem;width:.6rem}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .price span{font-family:inherit;font-size:.6rem;font-weight:500}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .price .previous_price{color:#ffffffb3;font-family:inherit;font-size:.6rem;text-decoration:line-through}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .price .discount{font-family:inherit;font-size:.6rem}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .title{color:#fff;font-family:inherit;font-size:.8rem;font-weight:500}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .description{color:#ffffffb3;font-family:inherit;font-size:.6rem;margin-top:2px}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .price{color:#fff;font-family:inherit;font-size:.6rem;font-weight:500;margin-top:2px}.hotstar_ad_component_wrapper .ad_item_card .ad_item_card_content .footer .brand{width:4rem}.hotstar_ad_component_wrapper .qr_container{background-color:#000000ad;border-radius:8px;display:flex;flex-direction:column;height:6rem;margin-left:auto;padding:.5rem;width:6rem}.hotstar_ad_component_wrapper .qr_container img{border-radius:8px;height:auto;-o-object-fit:contain;object-fit:contain;width:100%}@media only screen and (max-width:650px){.hotstar_ad_component_wrapper{bottom:20%}@media(orientation:landscape){.maxtap_main>p{font-size:calc(1vw + .2rem)}}@media (orientation:portrait){.maxtap_main>p{font-size:calc(1vw + .3rem)}}}");var e=function(){for(var e=document.querySelectorAll("video"),t=0;t<e.length;t++)if("VIDEO"===e[t].tagName)return e[t]},t=function(){var e=document.querySelector("[data-displaymaxtap]"),t=document.querySelector(".maxtap_img_wrapper");if(document.querySelector(".maxtap_img_wrapper")&&window.innerWidth>740&&e&&t){var n=.05*e.getBoundingClientRect().width;t.style.width=n>50?n+"px":"50px"}},n=new(function(){function n(){var n=this;this.currentComponentIndex=-1,this.isInitialized=!1,this.init=function(o){var r;if(n.isInitialized||document.getElementById("hotstar_ad_plugin"))console.log("Re-Initializing");else if(o.contentId)try{if(n.isInitialized=!0,n.contentId=o.contentId,"undefined"==typeof window)throw new ReferenceError("'window.document' is undefined while initializing Ads. Initialize in lifecyle events");n.video=e(),(r=n.contentId,new Promise((function(e,t){try{fetch("https://raw.githubusercontent.com/prakhar-goel/hotstar-quickcommerce-hackathon/main/assets/data.json",{method:"GET"}).then((function(n){n.json().then((function(n){n[r]?e(n[r].triggerPoints):t("No data found")}))})).catch((function(e){t(e)}))}catch(e){t(e)}}))).then((function(e){n.componentsData=e,n.componentsData?(n.addAdElement(),window.addEventListener("resize",(function(){t()})),n.intervalId=setInterval(n.updateComponent,300)):console.error("Ad data is empty!")})).catch((function(e){console.error(e)}))}catch(e){console.error(e),n.isInitialized=!1}else console.error("ContentId is missing")},this.updateComponent=function(){if(n.video){if(!n.adDivComponent)return n.addAdElement(),void console.error("Ad element is not present",{method:"updateComponent"});if(n.componentsData)if(n.video.parentElement===n.adDivComponent.parentElement||(console.error("Ad element is not sibling to video element",{method:"updateComponent"}),n.adDivComponent.remove(),n.addAdElement())){var t=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(t>=o.startTime&&t<=o.endTime)return n}return-1}(n.componentsData,Math.floor(n.video.currentTime));console.log("newAdComponentIndex",t),t<0?n.removeCurrentAdElement(n.adDivComponent):(n.currentComponentIndex=t,n.canCloseAd(Math.floor(n.video.currentTime))&&"none"!==n.adDivComponent.style.display&&(console.log("Removing ad",{methodName:"updateComponent"}),n.removeCurrentAdElement(n.adDivComponent)),n.canAdDisplay(Math.floor(n.video.currentTime))&&n.adDivComponent&&"none"===n.adDivComponent.style.display&&(console.log("Displaying ad",{methodName:"updateComponent"}),n.displayAd()))}else console.error("Ad element is not present",{method:"updateComponent"});else console.error("Ad data is empty!",{method:"updateComponent"})}else n.video=e()},this.addAdElement=function(){var e;return!!n.video&&(n.video.style.width="100%",n.video.style.height="100%",n.parentElement=n.video.parentElement,!!n.parentElement&&(n.parentElement.style.position="relative",n.adDivComponent=document.createElement("div"),n.adDivComponent.style.display="none",n.adDivComponent.id="hotstar_ad_plugin",n.adDivComponent.className="hotstar_ad_component_wrapper",null==(e=n.parentElement)||e.appendChild(n.adDivComponent),n.adDivComponent.addEventListener("click",n.redirectToAd),t(),!0))},this.canAdDisplay=function(e){var t=n.componentsData[n.currentComponentIndex];return!(t.startTime<0||!n.componentsData||!t)&&e<n.componentsData[n.currentComponentIndex].endTime&&e>n.componentsData[n.currentComponentIndex].startTime},this.canCloseAd=function(e){return!n.componentsData||!(n.componentsData[n.currentComponentIndex].startTime<0)&&(e>n.componentsData[n.currentComponentIndex].endTime||e<n.componentsData[n.currentComponentIndex].startTime)},this.removeCurrentAdElement=function(e){e&&(e.style.display="none",e.innerHTML="")},this.displayAd=function(){if(n.adDivComponent&&n.componentsData){if("flex"!==n.adDivComponent.style.display&&!(n.currentComponentIndex<0)&&n.componentsData[n.currentComponentIndex]){var e=n.componentsData[n.currentComponentIndex];e.ads.length>3&&(e.ads=e.ads.slice(0,3));var t=document.createElement("button");t.className="shop-button",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-bag"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg><span>Shop</span>',n.adDivComponent.appendChild(t);for(var o=function(t){var o,r,i=e.ads[t],a=(null==i||null==(o=i.description)?void 0:o.length)>70?(null==i||null==(r=i.description)?void 0:r.slice(0,70))+"...":i.description,d=document.createElement("a"),s=i.title,p="",c="";i.previousPrice?p='<p class="price">\n          <strong>'+i.price+'</strong>\n          <span class="previous_price">'+i.previousPrice+'</span>\n          <span class="discount" style="color:'+i.brandColor+'!important;">('+i.discount+")</span>\n        </p>":(s=i.title+" ("+i.price+")",c='<p class="description">'+a+"</p>"),d.onmousemove=function(){document.querySelectorAll(".qr_container").forEach((function(e){e.style.display="none"})),document.getElementById("qr_card_"+t).style.display="flex"},d.className="ad_item_card",d.href=i.redirectUrl,d.target="_blank",d.innerHTML='\n      <img src="'+i.imageUrl+'" alt="'+i.title+'"/>\n      <div class="ad_item_card_content">\n        <h3 class="title">'+s+"</h3>\n        "+c+"\n        "+p+'\n        <div class="footer">\n          <div class="delivery_time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><p>'+i.deliveryTime+'</p></div>\n          <img class="brand" src="'+i.brandLogoUrl+'" alt="brand-logo"/>\n        </div>\n      </div>\n      ',n.adDivComponent.appendChild(d)},r=0;r<e.ads.length;r++)o(r);for(var i=0;i<e.ads.length;i++){var a=e.ads[i];if(a.qrData){var d=document.createElement("div");d.className="qr_container",d.id="qr_card_"+i,d.innerHTML='<img src="'+a.qrData.qrImageUrl+'" alt="'+a.qrData.title+'"/>',d.style.display=0===i?"flex":"none",n.adDivComponent.appendChild(d)}}n.adDivComponent.style.display="flex"}}else console.error("Ad element is not present",{method:"displayAd",adDivComponent:n.adDivComponent,componentsData:n.componentsData})},this.redirectToAd=function(){try{if(!n.componentsData)return;n.video.pause()}catch(e){console.error(e)}},this.parentElement=void 0,this.intervalId=void 0}return n.prototype.removeAd=function(){var e;clearInterval(this.intervalId),this.isInitialized=!1,this.adDivComponent=void 0,this.currentComponentIndex=0,this.removeCurrentAdElement(document.getElementById("hotstar_ad_plugin")),null==(e=document.getElementById("hotstar_ad_plugin"))||e.remove()},n}());console.log("ads_plugin@0.1.18"),exports.AdComponent=n;
//# sourceMappingURL=hotstar_plugin.cjs.production.min.js.map
